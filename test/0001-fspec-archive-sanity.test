#! /bin/sh

set -eux

cat <<EOF > t.fspec
foo
type=reg
mode=0700

bar
type=reg

baz/
type=dir

fif
type=fifo

dev/
type=dir

dev/null
type=chardev
devnum=1

dev/sda
type=blockdev
devnum=2

EOF

fspec-tar < t.fspec | fspec-fromtar > out.fspec
diff -u t.fspec out.fspec

# XXX fixme
#fspec-cpio < t.fspec | fspec-fromcpio > out.fspec
#diff -u t.fspec out.fspec